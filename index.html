<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Location Performance Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Mono:wght@400;500&family=DM+Sans:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #f4f6fb;
    --panel: #ffffff;
    --border: #dde2ef;
    --accent1: #2563eb; /* blue â€” service failure */
    --accent2: #059669; /* green â€” absence */
    --red: #dc2626;
    --orange: #ea7c1e;
    --dim: #a0a9c2;
    --text: #1e2640;
    --muted: #6b7494;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    width: 1920px;
    height: 1080px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  }

  /* â”€â”€ HEADER â”€â”€ */
  header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 22px 48px 16px;
    border-bottom: 1px solid var(--border);
    flex-shrink: 0;
    background: #ffffff;
    box-shadow: 0 1px 4px rgba(0,0,0,0.06);
  }

  .title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 42px;
    letter-spacing: 3px;
    color: var(--text);
  }

  .subtitle {
    font-size: 14px;
    color: var(--muted);
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-top: 2px;
  }

  .legend {
    display: flex;
    gap: 32px;
    align-items: center;
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 14px;
    color: var(--muted);
    letter-spacing: 1px;
    text-transform: uppercase;
  }

  .legend-dot {
    width: 12px;
    height: 12px;
    border-radius: 2px;
  }

  .timestamp {
    font-family: 'DM Mono', monospace;
    font-size: 13px;
    color: var(--muted);
    text-align: right;
  }

  /* â”€â”€ MAIN GRID â”€â”€ */
  .main {
    flex: 1;
    display: grid;
    grid-template-columns: 200px 1fr;
    overflow: hidden;
  }

  /* â”€â”€ LEFT AXIS: LOCATION NAMES â”€â”€ */
  .loc-axis {
    display: flex;
    flex-direction: column;
    padding: 0 0 0 24px;
    border-right: 1px solid var(--border);
    background: #ffffff;
  }

  .day-label-spacer {
    height: 42px;
    flex-shrink: 0;
  }

  .loc-rows {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .loc-label {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding-right: 20px;
    border-bottom: 1px solid var(--border);
  }

  .loc-label:last-child { border-bottom: none; }

  .loc-name {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 22px;
    letter-spacing: 1.5px;
    color: var(--text);
    line-height: 1;
  }

  .loc-avg {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    color: var(--muted);
    margin-top: 4px;
    letter-spacing: 0.5px;
  }
  .dt-avg { color: var(--accent1); }
  .ab-avg { color: var(--accent2); }

  .loc-badge {
    display: inline-block;
    font-size: 10px;
    font-family: 'DM Mono', monospace;
    letter-spacing: 1px;
    padding: 2px 6px;
    border-radius: 2px;
    margin-top: 5px;
    text-transform: uppercase;
  }

  .badge-good { background: rgba(5,150,105,0.10); color: var(--accent2); }
  .badge-warn { background: rgba(234,124,30,0.12); color: var(--orange); }
  .badge-alert { background: rgba(220,38,38,0.10); color: var(--red); }

  /* â”€â”€ CHART AREA â”€â”€ */
  .chart-area {
    display: flex;
    flex-direction: column;
    padding: 0 32px 12px 32px;
  }

  /* â”€â”€ DAY HEADERS â”€â”€ */
  .day-headers {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    height: 42px;
    flex-shrink: 0;
  }

  .day-header {
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Bebas Neue', sans-serif;
    font-size: 18px;
    letter-spacing: 2px;
    color: var(--muted);
    border-bottom: 1px solid var(--border);
    border-right: 1px solid var(--border);
  }

  .day-header:last-child { border-right: none; }
  .day-header.today { color: var(--accent1); }
  .day-header.best-day  { color: var(--accent2); }
  .day-header.worst-day { color: var(--red); }

  /* â”€â”€ LOC ROWS â”€â”€ */
  .chart-rows {
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .chart-row {
    flex: 1;
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    border-bottom: 1px solid var(--border);
  }

  .chart-row:last-child { border-bottom: none; }

  /* â”€â”€ CELL â”€â”€ */
  .cell {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 10px 8px;
    border-right: 1px solid var(--border);
    position: relative;
  }

  .cell:last-child { border-right: none; }
  .cell.best-col  { background: rgba(5,150,105,0.05); }
  .cell.worst-col { background: rgba(220,38,38,0.05); }

  /* â”€â”€ BAR PAIR â”€â”€ */
  .bar-pair {
    display: flex;
    align-items: flex-end;
    gap: 5px;
    height: 64px;
  }

  .bar-wrap {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    width: 28px;
  }

  .bar {
    width: 100%;
    border-radius: 2px 2px 0 0;
    transition: height 0.3s;
    position: relative;
  }

  .bar-sf { background: var(--accent1); }
  .bar-ab { background: var(--accent2); }

  .bar.warn { background: var(--orange); }
  .bar.alert { background: var(--red); }

  .bar-val {
    font-family: 'DM Mono', monospace;
    font-size: 12px;
    font-weight: 500;
    color: var(--text);
    line-height: 1;
  }

  .bar-val.sf-val { color: var(--accent1); }
  .bar-val.ab-val { color: var(--accent2); }
  .bar-val.warn-val { color: var(--orange); }
  .bar-val.alert-val { color: var(--red); }

  .bar-label {
    font-size: 9px;
    letter-spacing: 0.5px;
    color: var(--dim);
    text-transform: uppercase;
    font-family: 'DM Mono', monospace;
  }

  /* â”€â”€ FOOTER â”€â”€ */
  footer {
    height: 36px;
    border-top: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 48px;
    flex-shrink: 0;
    background: #ffffff;
  }

  .footer-note {
    font-size: 11px;
    color: var(--dim);
    letter-spacing: 1px;
    text-transform: uppercase;
    font-family: 'DM Mono', monospace;
  }

  .threshold-note {
    display: flex;
    gap: 24px;
  }

  .thresh {
    font-family: 'DM Mono', monospace;
    font-size: 11px;
    color: var(--dim);
  }

  .thresh span { margin-right: 6px; }

</style>
</head>
<body>

<header>
  <div>
    <div class="title">Location Performance Monitor</div>
    <div class="subtitle">Dropped Trip & Employee Absence â€” Week of Feb 24, 2026</div>
  </div>
  <div class="legend">
    <div class="legend-item">
      <div class="legend-dot" style="background:var(--accent1)"></div>
      Dropped Trip Rate
    </div>
    <div class="legend-item">
      <div class="legend-dot" style="background:var(--accent2)"></div>
      Employee Absence Rate
    </div>
    <div class="legend-item">
      <div class="legend-dot" style="background:var(--orange)"></div>
      DT Elevated (0.5â€“1.0%)
    </div>
    <div class="legend-item">
      <div class="legend-dot" style="background:var(--red)"></div>
      DT Critical (&gt;1.0%)
    </div>
  </div>
  <div class="timestamp">
    UPDATED<br>FRI 27 FEB Â· 14:32
  </div>
</header>

<div class="main" id="dashboard"></div>

<footer>
  <div class="footer-note">DT = Dropped Trip rate Â· AB = Absence rate Â· DT bars scaled to max 1.5% Â· AB bars scaled to max 30%</div>
  <div class="threshold-note">
    <div class="thresh"><span style="color:var(--accent1)">â– </span> DT Good &lt;0.5%</div>
    <div class="thresh"><span style="color:var(--orange)">â– </span> DT Elevated 0.5â€“1.0%</div>
    <div class="thresh"><span style="color:var(--red)">â– </span> DT Critical &gt;1.0%</div>
    <div class="thresh"><span style="color:var(--accent2)">â– </span> AB rate (color by severity)</div>
  </div>
</footer>

<script>
const locations = [
  { name: "North Plaza",  short: "NP" },
  { name: "East Harbor",  short: "EH" },
  { name: "West Ridge",   short: "WR" },
  { name: "Central Hub",  short: "CH" },
  { name: "South Gate",   short: "SG" },
  { name: "Riverside",    short: "RV" },
  { name: "Uptown",       short: "UT" },
];

const days = ["MON", "TUE", "WED", "THU", "FRI", "SAT", "SUN"];

// [dropped_trip%, absence%] per location per day
// DT varies 0.1â€“1.3%, AB varies 4.8â€“24.7%
const data = [
  // North Plaza
  [[0.3,8.2],[0.6,11.4],[0.4,9.7],[0.8,13.1],[0.5,10.2],[1.1,18.6],[0.2,6.3]],
  // East Harbor
  [[0.7,14.5],[1.2,20.3],[0.9,17.8],[1.3,24.7],[1.0,19.2],[0.4,9.1],[0.3,7.4]],
  // West Ridge
  [[0.1,4.8],[0.2,6.1],[0.1,5.3],[0.3,7.9],[0.2,6.7],[0.1,5.0],[0.1,4.9]],
  // Central Hub
  [[0.5,10.6],[0.7,12.8],[0.6,11.3],[0.9,15.4],[0.8,13.7],[1.0,17.2],[0.6,11.0]],
  // South Gate
  [[0.4,9.3],[0.5,10.7],[1.1,21.4],[1.3,23.8],[0.9,16.5],[0.6,12.1],[0.4,8.8]],
  // Riverside
  [[0.2,7.1],[0.3,8.4],[0.2,6.9],[0.4,9.5],[0.3,8.0],[0.2,6.2],[0.1,5.5]],
  // Uptown
  [[0.8,15.3],[0.6,12.6],[0.5,11.1],[0.7,13.9],[1.0,18.4],[1.2,22.1],[0.7,14.0]],
];

// Separate scale maxes for the two very different metrics
const DT_MAX  = 1.5;   // dropped trip bar scale max %
const AB_MAX  = 30;    // absence bar scale max %
const BAR_MAX_PX = 64;

// Threshold helpers â€” DT has 3 levels, AB keeps 2
function getDTBarClass(val) {
  if (val > 1.0) return 'alert';
  if (val >= 0.5) return 'warn';
  return 'bar-sf';
}
function getDTValClass(val) {
  if (val > 1.0) return 'alert-val';
  if (val >= 0.5) return 'warn-val';
  return 'sf-val';
}
function getABBarClass(val) {
  if (val > 18) return 'alert';
  if (val > 10) return 'warn';
  return 'bar-ab';
}
function getABValClass(val) {
  if (val > 18) return 'alert-val';
  if (val > 10) return 'warn-val';
  return 'ab-val';
}

function avgPair(locData) {
  let dt = 0, ab = 0;
  locData.forEach(([d, a]) => { dt += d; ab += a; });
  return [+(dt/7).toFixed(2), +(ab/7).toFixed(1)];
}

function getBadge(dt, ab) {
  if (dt > 1.0 || ab > 18) return ['badge-alert', 'Critical'];
  if (dt >= 0.5 || ab > 10) return ['badge-warn',  'Elevated'];
  return ['badge-good', 'On Track'];
}

// Compute systemwide average (DT + AB normalized) for best/worst day
const dayTotals = days.map((_, di) => {
  let sum = 0, count = 0;
  data.forEach(locData => {
    const [dt, ab] = locData[di];
    sum += (dt / DT_MAX) + (ab / AB_MAX); // normalize before combining
    count += 2;
  });
  return sum / count;
});

const bestIdx  = dayTotals.indexOf(Math.min(...dayTotals));
const worstIdx = dayTotals.indexOf(Math.max(...dayTotals));

const dash = document.getElementById('dashboard');

// â”€â”€ LEFT AXIS â”€â”€
const locAxis = document.createElement('div');
locAxis.className = 'loc-axis';
const spacer = document.createElement('div');
spacer.className = 'day-label-spacer';
locAxis.appendChild(spacer);

const locRows = document.createElement('div');
locRows.className = 'loc-rows';

locations.forEach((loc, li) => {
  const [avgDT, avgAB] = avgPair(data[li]);
  const [badgeClass, badgeText] = getBadge(avgDT, avgAB);
  const el = document.createElement('div');
  el.className = 'loc-label';
  el.innerHTML = `
    <div class="loc-name">${loc.name}</div>
    <div class="loc-avg dt-avg">DT avg ${avgDT}%</div>
    <div class="loc-avg ab-avg">AB avg ${avgAB}%</div>
    <div class="loc-badge ${badgeClass}">${badgeText}</div>
  `;
  locRows.appendChild(el);
});

locAxis.appendChild(locRows);
dash.appendChild(locAxis);

// â”€â”€ CHART AREA â”€â”€
const chartArea = document.createElement('div');
chartArea.className = 'chart-area';

// Day headers
const dayHeaders = document.createElement('div');
dayHeaders.className = 'day-headers';
days.forEach((d, i) => {
  const dh = document.createElement('div');
  let icon = '';
  if (i === bestIdx)       { icon = ' ðŸ˜Š'; dh.className = 'day-header best-day'; }
  else if (i === worstIdx) { icon = ' ðŸ˜Ÿ'; dh.className = 'day-header worst-day'; }
  else                     { dh.className = 'day-header'; }
  dh.textContent = d + icon;
  dayHeaders.appendChild(dh);
});
chartArea.appendChild(dayHeaders);

// Chart rows
const chartRowsEl = document.createElement('div');
chartRowsEl.className = 'chart-rows';

locations.forEach((loc, li) => {
  const row = document.createElement('div');
  row.className = 'chart-row';

  days.forEach((_, di) => {
    const [dt, ab] = data[li][di];
    const dtH = Math.round((dt / DT_MAX) * BAR_MAX_PX);
    const abH = Math.round((ab / AB_MAX) * BAR_MAX_PX);
    const dtBarClass = getDTBarClass(dt);
    const abBarClass = getABBarClass(ab);
    const dtValClass = getDTValClass(dt);
    const abValClass = getABValClass(ab);

    const cell = document.createElement('div');
    cell.className = 'cell' + (di === bestIdx ? ' best-col' : di === worstIdx ? ' worst-col' : '');
    cell.innerHTML = `
      <div class="bar-pair">
        <div class="bar-wrap">
          <div class="bar-val ${dtValClass}">${dt}%</div>
          <div class="bar ${dtBarClass}" style="height:${dtH}px"></div>
          <div class="bar-label">DT</div>
        </div>
        <div class="bar-wrap">
          <div class="bar-val ${abValClass}">${ab}%</div>
          <div class="bar ${abBarClass}" style="height:${abH}px"></div>
          <div class="bar-label">AB</div>
        </div>
      </div>
    `;
    row.appendChild(cell);
  });

  chartRowsEl.appendChild(row);
});

chartArea.appendChild(chartRowsEl);
dash.appendChild(chartArea);
</script>
</body>
</html>
