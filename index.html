<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Location Performance Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Mono:wght@400;500&family=DM+Sans:wght@300;400;600&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #f0f3fa;
    --panel: #ffffff;
    --border: #dde2ef;
    --accent1: #2563eb;
    --accent2: #059669;
    --red: #dc2626;
    --orange: #ea7c1e;
    --dim: #a0a9c2;
    --text: #1e2640;
    --muted: #6b7494;
  }

- { margin: 0; padding: 0; box-sizing: border-box; }

body {
background: var(â€“bg);
color: var(â€“text);
font-family: â€˜DM Sansâ€™, sans-serif;
width: 1920px;
height: 1080px;
overflow: hidden;
display: flex;
flex-direction: column;
}

/* â”€â”€ HEADER â”€â”€ */
header {
height: 90px;
display: flex;
align-items: center;
justify-content: space-between;
padding: 0 48px;
border-bottom: 2px solid var(â€“border);
flex-shrink: 0;
background: #ffffff;
box-shadow: 0 1px 6px rgba(0,0,0,0.07);
}

.title {
font-family: â€˜Bebas Neueâ€™, sans-serif;
font-size: 40px;
letter-spacing: 3px;
color: var(â€“text);
line-height: 1;
}

.subtitle {
font-size: 12px;
color: var(â€“muted);
letter-spacing: 2px;
text-transform: uppercase;
margin-top: 4px;
}

.legend {
display: flex;
gap: 24px;
align-items: center;
}

.legend-item {
display: flex;
align-items: center;
gap: 7px;
font-size: 11px;
color: var(â€“muted);
letter-spacing: 0.8px;
text-transform: uppercase;
}

.legend-dot {
width: 10px;
height: 10px;
border-radius: 2px;
flex-shrink: 0;
}

.timestamp {
font-family: â€˜DM Monoâ€™, monospace;
font-size: 12px;
color: var(â€“muted);
text-align: right;
line-height: 1.6;
}

/* â”€â”€ MAIN â”€â”€ */
.main {
flex: 1;
display: grid;
grid-template-columns: 220px 1fr;
overflow: hidden;
}

/* â”€â”€ LEFT AXIS â”€â”€ */
.loc-axis {
display: flex;
flex-direction: column;
border-right: 2px solid var(â€“border);
background: #ffffff;
box-shadow: 2px 0 6px rgba(0,0,0,0.04);
}

.day-label-spacer {
height: 44px;
flex-shrink: 0;
border-bottom: 1px solid var(â€“border);
}

.loc-rows {
flex: 1;
display: flex;
flex-direction: column;
}

.loc-label {
flex: 1;
display: flex;
flex-direction: column;
justify-content: center;
padding: 0 16px 0 20px;
border-bottom: 1px solid var(â€“border);
}
.loc-label:last-child { border-bottom: none; }

.loc-name {
font-family: â€˜Bebas Neueâ€™, sans-serif;
font-size: 20px;
letter-spacing: 1.5px;
color: var(â€“text);
line-height: 1;
}

.loc-avg {
font-family: â€˜DM Monoâ€™, monospace;
font-size: 11px;
margin-top: 3px;
letter-spacing: 0.3px;
}
.dt-avg { color: var(â€“accent1); }
.ab-avg { color: var(â€“accent2); }

.loc-badge {
display: inline-block;
font-size: 9px;
font-family: â€˜DM Monoâ€™, monospace;
letter-spacing: 1px;
padding: 2px 5px;
border-radius: 2px;
margin-top: 4px;
text-transform: uppercase;
width: fit-content;
}
.badge-good  { background: rgba(5,150,105,0.10);  color: var(â€“accent2); }
.badge-warn  { background: rgba(234,124,30,0.12);  color: var(â€“orange); }
.badge-alert { background: rgba(220,38,38,0.10);   color: var(â€“red); }

/* â”€â”€ CHART AREA â”€â”€ */
.chart-area {
display: flex;
flex-direction: column;
padding: 0 24px 0 24px;
}

/* â”€â”€ DAY HEADERS â”€â”€ */
.day-headers {
display: grid;
grid-template-columns: repeat(7, 1fr);
height: 44px;
flex-shrink: 0;
}

.day-header {
display: flex;
align-items: center;
justify-content: center;
font-family: â€˜Bebas Neueâ€™, sans-serif;
font-size: 20px;
letter-spacing: 2.5px;
color: var(â€“muted);
border-bottom: 1px solid var(â€“border);
border-right: 1px solid var(â€“border);
gap: 6px;
}
.day-header:last-child { border-right: none; }
.day-header.best-day   { color: var(â€“accent2); }
.day-header.worst-day  { color: var(â€“red); }
.face { font-size: 18px; line-height: 1; }

/* â”€â”€ CHART ROWS â”€â”€ */
.chart-rows {
flex: 1;
display: flex;
flex-direction: column;
}

.chart-row {
flex: 1;
display: grid;
grid-template-columns: repeat(7, 1fr);
border-bottom: 1px solid var(â€“border);
}
.chart-row:last-child { border-bottom: none; }

/* â”€â”€ CELL â”€â”€ */
.cell {
display: flex;
flex-direction: column;
justify-content: center;
gap: 8px;
padding: 10px 16px;
border-right: 1px solid var(â€“border);
}
.cell:last-child { border-right: none; }
.cell.best-col  { background: rgba(5,150,105,0.04); }
.cell.worst-col { background: rgba(220,38,38,0.04); }

/* â”€â”€ HORIZONTAL BAR ROW â”€â”€ */
.hbar-row {
display: flex;
align-items: center;
gap: 8px;
}

.hbar-label {
font-family: â€˜DM Monoâ€™, monospace;
font-size: 10px;
letter-spacing: 0.5px;
color: var(â€“dim);
text-transform: uppercase;
width: 16px;
flex-shrink: 0;
text-align: right;
}

.hbar-track {
flex: 1;
height: 22px;
background: #e8ecf5;
border-radius: 3px;
position: relative;
overflow: visible;
}

.hbar-fill {
height: 100%;
border-radius: 3px;
position: absolute;
left: 0;
top: 0;
display: flex;
align-items: center;
min-width: 4px;
overflow: hidden;
}

.hbar-val-inside {
font-family: â€˜DM Monoâ€™, monospace;
font-size: 11px;
font-weight: 500;
padding-left: 7px;
white-space: nowrap;
color: #fff;
line-height: 1;
}

.hbar-val-outside {
font-family: â€˜DM Monoâ€™, monospace;
font-size: 11px;
font-weight: 500;
padding-left: 6px;
white-space: nowrap;
line-height: 1;
flex-shrink: 0;
}

/* fill colors */
.fill-dt-good   { background: var(â€“accent1); }
.fill-dt-warn   { background: var(â€“orange); }
.fill-dt-alert  { background: var(â€“red); }
.fill-ab-good   { background: var(â€“accent2); }
.fill-ab-warn   { background: var(â€“orange); }
.fill-ab-alert  { background: var(â€“red); }

/* outside value colors */
.val-dt-good  { color: var(â€“accent1); }
.val-dt-warn  { color: var(â€“orange); }
.val-dt-alert { color: var(â€“red); }
.val-ab-good  { color: var(â€“accent2); }
.val-ab-warn  { color: var(â€“orange); }
.val-ab-alert { color: var(â€“red); }

/* â”€â”€ FOOTER â”€â”€ */
footer {
height: 38px;
border-top: 1px solid var(â€“border);
display: flex;
align-items: center;
justify-content: space-between;
padding: 0 48px;
flex-shrink: 0;
background: #ffffff;
}

.footer-note {
font-size: 11px;
color: var(â€“dim);
letter-spacing: 0.8px;
text-transform: uppercase;
font-family: â€˜DM Monoâ€™, monospace;
}

.threshold-note { display: flex; gap: 20px; }

.thresh {
font-family: â€˜DM Monoâ€™, monospace;
font-size: 11px;
color: var(â€“dim);
}
.thresh span { margin-right: 4px; }

</style>
</head>
<body>

<header>
  <div>
    <div class="title">Location Performance Monitor</div>
    <div class="subtitle">Dropped Trip &amp; Employee Absence â€” Week of Feb 24, 2026</div>
  </div>
  <div class="legend">
    <div class="legend-item"><div class="legend-dot" style="background:var(--accent1)"></div>DT Good &lt;0.5%</div>
    <div class="legend-item"><div class="legend-dot" style="background:var(--orange)"></div>DT Elevated 0.5â€“1.0%</div>
    <div class="legend-item"><div class="legend-dot" style="background:var(--red)"></div>DT Critical &gt;1.0%</div>
    <div class="legend-item" style="margin-left:12px"><div class="legend-dot" style="background:var(--accent2)"></div>AB Normal &lt;10%</div>
    <div class="legend-item"><div class="legend-dot" style="background:var(--orange)"></div>AB Elevated 10â€“18%</div>
    <div class="legend-item"><div class="legend-dot" style="background:var(--red)"></div>AB Critical &gt;18%</div>
  </div>
  <div class="timestamp">UPDATED<br>FRI 27 FEB Â· 14:32</div>
</header>

<div class="main" id="dashboard"></div>

<footer>
  <div class="footer-note">DT = Dropped Trip Â· AB = Absence Â· Each bar scaled within its own metric range</div>
  <div class="threshold-note">
    <div class="thresh"><span style="color:var(--accent1)">â– </span>DT &lt;0.5%</div>
    <div class="thresh"><span style="color:var(--orange)">â– </span>DT 0.5â€“1.0%</div>
    <div class="thresh"><span style="color:var(--red)">â– </span>DT &gt;1.0%</div>
    <div class="thresh" style="margin-left:16px"><span style="color:var(--accent2)">â– </span>AB &lt;10%</div>
    <div class="thresh"><span style="color:var(--orange)">â– </span>AB 10â€“18%</div>
    <div class="thresh"><span style="color:var(--red)">â– </span>AB &gt;18%</div>
  </div>
</footer>

<script>
const locations = [
  { name: "North Plaza" },
  { name: "East Harbor" },
  { name: "West Ridge"  },
  { name: "Central Hub" },
  { name: "South Gate"  },
  { name: "Riverside"   },
  { name: "Uptown"      },
];

const days = ["MON","TUE","WED","THU","FRI","SAT","SUN"];

// [dropped_trip%, absence%] per location per day
const data = [
  // North Plaza
  [[0.3,8.2],[0.6,11.4],[0.4,9.7],[0.8,13.1],[0.5,10.2],[1.1,18.6],[0.2,6.3]],
  // East Harbor
  [[0.7,14.5],[1.2,20.3],[0.9,17.8],[1.3,24.7],[1.0,19.2],[0.4,9.1],[0.3,7.4]],
  // West Ridge
  [[0.1,4.8],[0.2,6.1],[0.1,5.3],[0.3,7.9],[0.2,6.7],[0.1,5.0],[0.1,4.9]],
  // Central Hub
  [[0.5,10.6],[0.7,12.8],[0.6,11.3],[0.9,15.4],[0.8,13.7],[1.0,17.2],[0.6,11.0]],
  // South Gate
  [[0.4,9.3],[0.5,10.7],[1.1,21.4],[1.3,23.8],[0.9,16.5],[0.6,12.1],[0.4,8.8]],
  // Riverside
  [[0.2,7.1],[0.3,8.4],[0.2,6.9],[0.4,9.5],[0.3,8.0],[0.2,6.2],[0.1,5.5]],
  // Uptown
  [[0.8,15.3],[0.6,12.6],[0.5,11.1],[0.7,13.9],[1.0,18.4],[1.2,22.1],[0.7,14.0]],
];

const DT_MAX = 1.5;
const AB_MAX = 30;
// Threshold at which we show value inside vs outside the bar (% of track width)
const DT_INSIDE_THRESH = 40;
const AB_INSIDE_THRESH = 30;

function dtClass(v)  { return v > 1.0 ? 'alert' : v >= 0.5 ? 'warn' : 'good'; }
function abClass(v)  { return v > 18  ? 'alert' : v > 10   ? 'warn' : 'good'; }

function avgPair(locData) {
  let dt = 0, ab = 0;
  locData.forEach(([d,a]) => { dt += d; ab += a; });
  return [+(dt/7).toFixed(2), +(ab/7).toFixed(1)];
}

function getBadge(dt, ab) {
  if (dt > 1.0 || ab > 18) return ['badge-alert','Critical'];
  if (dt >= 0.5 || ab > 10) return ['badge-warn','Elevated'];
  return ['badge-good','On Track'];
}

// Best/worst day by normalized combined score
const dayTotals = days.map((_,di) => {
  let s = 0;
  data.forEach(ld => { const [dt,ab] = ld[di]; s += (dt/DT_MAX) + (ab/AB_MAX); });
  return s / data.length;
});
const bestIdx  = dayTotals.indexOf(Math.min(...dayTotals));
const worstIdx = dayTotals.indexOf(Math.max(...dayTotals));

// â”€â”€ BUILD DOM â”€â”€
const dash = document.getElementById('dashboard');

// Left axis
const locAxis = document.createElement('div');
locAxis.className = 'loc-axis';
const sp = document.createElement('div');
sp.className = 'day-label-spacer';
locAxis.appendChild(sp);

const locRows = document.createElement('div');
locRows.className = 'loc-rows';
locations.forEach((loc, li) => {
  const [avgDT, avgAB] = avgPair(data[li]);
  const [badgeClass, badgeText] = getBadge(avgDT, avgAB);
  const el = document.createElement('div');
  el.className = 'loc-label';
  el.innerHTML = `
    <div class="loc-name">${loc.name}</div>
    <div class="loc-avg dt-avg">DT avg ${avgDT}%</div>
    <div class="loc-avg ab-avg">AB avg ${avgAB}%</div>
    <div class="loc-badge ${badgeClass}">${badgeText}</div>
  `;
  locRows.appendChild(el);
});
locAxis.appendChild(locRows);
dash.appendChild(locAxis);

// Chart area
const chartArea = document.createElement('div');
chartArea.className = 'chart-area';

// Day headers
const dayHeaders = document.createElement('div');
dayHeaders.className = 'day-headers';
days.forEach((d, i) => {
  const dh = document.createElement('div');
  if      (i === bestIdx)  dh.className = 'day-header best-day';
  else if (i === worstIdx) dh.className = 'day-header worst-day';
  else                     dh.className = 'day-header';
  dh.innerHTML = `<span>${d}</span>` +
    (i === bestIdx  ? `<span class="face">ðŸ˜Š</span>` : '') +
    (i === worstIdx ? `<span class="face">ðŸ˜Ÿ</span>` : '');
  dayHeaders.appendChild(dh);
});
chartArea.appendChild(dayHeaders);

// Chart rows
const chartRowsEl = document.createElement('div');
chartRowsEl.className = 'chart-rows';

locations.forEach((loc, li) => {
  const row = document.createElement('div');
  row.className = 'chart-row';

  days.forEach((_, di) => {
    const [dt, ab] = data[li][di];
    const dtPct = Math.min(100, (dt / DT_MAX) * 100);
    const abPct = Math.min(100, (ab / AB_MAX) * 100);
    const dtC = dtClass(dt);
    const abC = abClass(ab);
    const dtInside = dtPct >= DT_INSIDE_THRESH;
    const abInside = abPct >= AB_INSIDE_THRESH;

    const cell = document.createElement('div');
    cell.className = 'cell' + (di === bestIdx ? ' best-col' : di === worstIdx ? ' worst-col' : '');

    cell.innerHTML = `
      <div class="hbar-row">
        <div class="hbar-label">DT</div>
        <div class="hbar-track">
          <div class="hbar-fill fill-dt-${dtC}" style="width:${dtPct}%">
            ${dtInside ? `<span class="hbar-val-inside">${dt}%</span>` : ''}
          </div>
        </div>
        ${!dtInside ? `<span class="hbar-val-outside val-dt-${dtC}">${dt}%</span>` : ''}
      </div>
      <div class="hbar-row">
        <div class="hbar-label">AB</div>
        <div class="hbar-track">
          <div class="hbar-fill fill-ab-${abC}" style="width:${abPct}%">
            ${abInside ? `<span class="hbar-val-inside">${ab}%</span>` : ''}
          </div>
        </div>
        ${!abInside ? `<span class="hbar-val-outside val-ab-${abC}">${ab}%</span>` : ''}
      </div>
    `;
    row.appendChild(cell);
  });

  chartRowsEl.appendChild(row);
});

chartArea.appendChild(chartRowsEl);
dash.appendChild(chartArea);
</script>

</body>
</html>